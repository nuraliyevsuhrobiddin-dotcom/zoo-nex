<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZooTube - Hayvonlar va Chorva Bozori</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="toast.css">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="logo-section">
            <button class="menu-btn" title="Menyuni ochish/yopish">
                <i class="fas fa-bars"></i>
            </button>
            <a href="#" class="logo">
                Zoo<span>Nex</span>
            </a>
        </div>

        <div class="search-section">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Izlash...">
                <button class="search-btn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>

        <div class="user-section">
            <button class="icon-btn upload-trigger" title="E'lon berish" onclick="openUploadModal()">
                <i class="fas fa-video"></i>
            </button>
            <div class="notifications-dropdown-container">
                <button class="icon-btn" id="notifBtn" title="Bildirishnomalar">
                    <i class="fas fa-bell"></i>
                    <span class="notif-badge" id="notifCount">3</span>
                </button>
                <div class="notif-dropdown" id="notifDropdown">
                    <div class="notif-header">Bildirishnomalar</div>
                    <div class="notif-list" id="notifList">
                        <div class="notif-item">
                            <i class="fas fa-video"></i>
                            <div><strong>Bobur Itlari</strong> yangi video yukladi</div>
                        </div>
                        <div class="notif-item">
                            <i class="fas fa-heart"></i>
                            <div>Sizning e'loningizga 5 kishi qiziqish bildirdi</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="authButtons">
                <button class="login-btn-header" onclick="openAuthModal('login')">Kirish</button>
            </div>

            <div id="userAvatarContainer" class="user-avatar-container" style="display: none;">
                <div class="user-avatar" id="headerAvatar">U</div>
                <div class="user-dropdown">
                    <div class="dropdown-header" id="dropdownUserName">Foydalanuvchi</div>
                    <hr>
                    <a href="#" onclick="state.currentNav='profile'; renderVideos(); return false;"><i
                            class="fas fa-user-circle"></i> Mening profilim</a>
                    <a href="#" onclick="logout(); return false;"><i class="fas fa-sign-out-alt"></i> Chiqish</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar">
        <nav>
            <a href="#" class="nav-item active" data-nav="home">
                <i class="fas fa-home"></i>
                <span>Asosiy</span>
            </a>
            <a href="#" class="nav-item" data-nav="trending">
                <i class="fas fa-fire"></i>
                <span>Ommabop</span>
            </a>
            <a href="#" class="nav-item" data-nav="shorts">
                <i class="fab fa-tiktok"></i>
                <span>Shorts</span>
            </a>
            <a href="#" class="nav-item" data-nav="subs">
                <i class="fas fa-clapperboard"></i>
                <span>Obunalar</span>
            </a>
            <hr>
            <div class="sidebar-title">Kutubxona</div>
            <a href="#" class="nav-item" data-nav="history">
                <i class="fas fa-history"></i>
                <span>Tarix</span>
            </a>
            <a href="#" class="nav-item" data-nav="later">
                <i class="fas fa-clock"></i>
                <span>Keyin ko'rish</span>
            </a>
            <a href="#" class="nav-item" data-nav="liked">
                <i class="fas fa-thumbs-up"></i>
                <span>Yoqtirilganlar</span>
            </a>
            <hr>
            <div class="sidebar-title">Ekotizim</div>
            <a href="#" class="nav-item" data-nav="academy">
                <i class="fas fa-graduation-cap"></i>
                <span>Akademiya</span>
            </a>
            <a href="#" class="nav-item" data-nav="tools">
                <i class="fas fa-screwdriver-wrench"></i>
                <span>Asbob-uskunalar</span>
            </a>
            <a href="#" class="nav-item" data-nav="feed">
                <i class="fas fa-wheat-awn"></i>
                <span>Yem-xashak</span>
            </a>
            <hr>
            <div id="adminDivider" style="display: none;">
                <div class="sidebar-title">Boshqaruv</div>
                <a href="#" class="nav-item" id="adminSidebarLink" data-nav="admin" style="display: none;">
                    <i class="fas fa-user-shield"></i>
                    <span>Admin Panel</span>
                </a>
            </div>
            <hr>
            <a href="#" class="nav-item" data-nav="vets">
                <i class="fas fa-user-doctor"></i>
                <span>Veterinarlar</span>
            </a>
            <a href="#" class="nav-item" data-nav="pharmacies">
                <i class="fas fa-shopping-bag"></i>
                <span>Online Do'kon</span>
            </a>
            <a href="#" class="nav-item" data-nav="dispatch">
                <i class="fas fa-truck"></i>
                <span>Dispetcher</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main>
        <!-- Category Chips -->
        <div class="categories-container" id="categoryTabs">
            <div class="categories">
                <button class="cat-btn active" data-category="all">Hammasi</button>
                <button class="cat-btn" data-category="it">Itlar</button>
                <button class="cat-btn" data-category="mushuk">Mushuklar</button>
                <button class="cat-btn" data-category="paranda">Parandalar</button>
                <button class="cat-btn" data-category="ot">Otlar</button>
                <button class="cat-btn" data-category="qush">Qushlar</button>
                <button class="cat-btn" data-category="mol">Sigirlar/Mollar</button>
                <button class="cat-btn" data-category="yem">Yem-xashak</button>
                <button class="cat-btn" data-category="asbob">Asboblar</button>
                <button class="cat-btn" data-category="akademiya">Akademiya</button>
                <button class="cat-btn" data-category="vitamin">Vitaminlar</button>
                <button class="cat-btn" data-category="vets">Veterinarlar</button>
                <button class="cat-btn" data-category="pharmacies">Dorixonalar</button>
                <button class="cat-btn" data-category="ekzotik">Ekzotik</button>
            </div>
        </div>

        <!-- Region Filter -->
        <div style="margin-bottom: 20px;">
            <select id="regionFilter" class="form-group" style="max-width: 200px; padding: 6px;">
                <option value="all">Barcha hududlar</option>
                <option value="toshkent">Toshkent</option>
                <option value="samarqand">Samarqand</option>
                <option value="fargona">Farg'ona</option>
                <option value="andijon">Andijon</option>
                <option value="namangan">Namangan</option>
                <option value="buhoro">Buxoro</option>
                <option value="navoiy">Navoiy</option>
                <option value="qashqadaryo">Qashqadaryo</option>
                <option value="surxandaryo">Surxondaryo</option>
                <option value="jizzax">Jizzax</option>
                <option value="sirdaryo">Sirdaryo</option>
                <option value="xorazm">Xorazm</option>
                <option value="qoraqalpogiston">Qoraqalpog'iston</option>
            </select>
        </div>

        <!-- Video Grid View -->
        <section id="videoGrid" class="video-grid">
            <!-- Videos injected via app.js -->
        </section>

        <!-- Shorts Grid View -->
        <section id="shortsGrid" class="shorts-grid" style="display: none;">
            <!-- Shorts injected via app.js -->
        </section>

        <!-- Academy View -->
        <section id="academyView" style="display: none;" class="academy-grid">
            <!-- Academy courses injected via app.js -->
        </section>

        <!-- Veterinarian View -->
        <section id="vetView" style="display: none;" class="vet-grid">
            <!-- Vets injected via app.js -->
        </section>

        <!-- Pharmacy View -->
        <section id="pharmacyView" style="display: none;" class="pharmacy-grid">
            <!-- Pharmacies injected via app.js -->
        </section>

        <!-- Dispatcher View -->
        <section id="dispatchView" style="display: none;" class="dispatch-section">
            <!-- Dispatcher cards injected via app.js -->
        </section>

        <!-- Profile View Container -->
        <section id="profileView" style="display: none;" class="profile-container">
            <div class="profile-banner-container">
                <div class="profile-banner" id="profileBanner"></div>
            </div>
            <div class="profile-header">
                <div class="user-avatar-large" id="profileAvatarLarge">U</div>
                <div class="profile-user-info">
                    <h1 id="profileNameLarge">Foydalanuvchi</h1>
                    <div class="profile-stats">
                        <span id="profileSubsCount">0 obunachilar</span> •
                        <span id="profileVideosCount">0 videolar</span>
                    </div>
                </div>
            </div>
            <hr>
            <div class="profile-tabs">
                <button class="profile-tab active" data-tab="videos">E'lonlar</button>
                <button class="profile-tab" data-tab="shorts">Shorts</button>
                <button class="profile-tab" data-tab="liked">Yoqtirilganlar</button>
            </div>
            <h3 id="profileSectionTitle">Mening videolarim</h3>
            <div id="profileVideoGrid" class="video-grid">
                <!-- User's own videos injected via app.js -->
            </div>
        </section>

        <!-- Admin View Container -->
        <section id="adminView" style="display: none;">
            <div class="admin-header">
                <h1>Admin Panel</h1>
            </div>
            <div class="admin-stats-grid">
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <div class="stat-info">
                        <span id="adminTotalUsers">0</span>
                        <p>Foydalanuvchilar</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-video"></i>
                    <div class="stat-info">
                        <span id="adminTotalVideos">0</span>
                        <p>Jami videolar</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-eye"></i>
                    <div class="stat-info">
                        <span id="adminTotalViews">0</span>
                        <p>Ko'rishlar</p>
                    </div>
                </div>
            </div>

            <div class="admin-content-tabs">
                <button class="active" onclick="switchAdminTab('videos')">Videolar</button>
                <button onclick="switchAdminTab('users')">Foydalanuvchilar</button>
            </div>

            <div class="admin-table-container">
                <table id="adminVideosTable">
                    <thead>
                        <tr>
                            <th>Video</th>
                            <th>Sotuvchi</th>
                            <th>Kategoriya</th>
                            <th>Ko'rishlar</th>
                            <th>Amallar</th>
                        </tr>
                    </thead>
                    <tbody id="adminVideosList"></tbody>
                </table>
                <table id="adminUsersTable" style="display: none;">
                    <thead>
                        <tr>
                            <th>Foydalanuvchi</th>
                            <th>Email</th>
                            <th>Obunalar</th>
                            <th>Amallar</th>
                        </tr>
                    </thead>
                    <tbody id="adminUsersList"></tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Video Player Modal -->
    <div id="videoModal" class="modal">
        <div class="modal-overlay" onclick="closeAllModals()"></div>

        <div class="modal-content-wrapper">
            <div class="modal-main-content">
                <button class="close-modal" onclick="closeAllModals()">&times;</button>
                <div class="player-aspect-ratio">
                    <iframe id="mainYouTubePlayer" width="100%" height="100%" src="" frameborder="0"
                        allow="autoplay; encrypted-media" allowfullscreen></iframe>
                </div>
                <div class="video-details-detailed">
                    <h2 id="modalVideoTitle">Video Sarlavhasi</h2>
                    <div class="video-meta-actions">
                        <div class="video-stats">
                            <span id="modalVideoViews">0</span> marta ko'rilgan • <span id="modalVideoTime">hozir</span>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn" id="likeBtn">
                                <i class="far fa-thumbs-up"></i> Like
                            </button>
                            <button class="action-btn" id="laterBtn">
                                <i class="far fa-clock"></i> Keyinroq
                            </button>
                            <button class="action-btn">
                                <i class="fas fa-share"></i> Ulashish
                            </button>
                        </div>
                    </div>

                    <hr>

                    <div class="seller-info-detailed">
                        <div class="seller-left">
                            <div class="seller-avatar-large">
                                <img id="modalSellerAvatar" src="https://i.pravatar.cc/150" alt="avatar">
                            </div>
                            <div class="seller-details">
                                <div class="seller-name-large" id="modalSellerName">Sotuvchi</div>
                                <div class="seller-subs">0 obunachilar</div>
                            </div>
                            <button class="sub-btn">Obuna bo'lish</button>
                        </div>
                        <div class="contact-section">
                            <div class="price-info"
                                style="font-size: 24px; font-weight: 700; color: #4CAF50; margin-bottom: 8px;"
                                id="modalVideoPrice">0 so'm</div>
                            <div style="margin-bottom: 12px; color: var(--text-secondary);">
                                <i class="fas fa-map-marker-alt"></i> <span id="modalVideoLocation">Manzil</span>
                            </div>
                            <a id="tgContactBtn" href="#" target="_blank" class="contact-btn"
                                style="background: #0088cc; display: inline-block; text-decoration: none; text-align: center; margin-right: 5px;">
                                <i class="fab fa-telegram-plane"></i> Telegram
                            </a>
                            <a id="waContactBtn" href="#" target="_blank" class="contact-btn"
                                style="background: #25D366; display: inline-block; text-decoration: none; text-align: center;">
                                <i class="fab fa-whatsapp"></i> WhatsApp
                            </a>
                        </div>
                    </div>

                    <div id="modalVideoDesc" class="video-description">
                        Video haqida batafsil ma'lumot...
                    </div>

                    <hr>

                    <!-- Comments Section -->
                    <div class="comments-section">
                        <h3><span id="commentCount">0</span> ta izoh</h3>
                        <div class="comment-input-area" style="display: flex; gap: 12px; margin-top: 16px;">
                            <div class="user-avatar-sm"
                                style="width: 40px; height: 40px; border-radius: 50%; background: #444; flex-shrink: 0; display: flex; align-items: center; justify-content: center;">
                                U</div>
                            <div style="flex-grow: 1;">
                                <input type="text" id="commentInput" placeholder="Izoh qoldiring..."
                                    style="width: 100%; border: none; border-bottom: 1px solid var(--border-color); background: transparent; padding: 8px 0; color: white; outline: none;">
                                <div style="display: flex; justify-content: flex-end; margin-top: 8px;">
                                    <button id="sendCommentBtn" class="action-btn"
                                        style="background: #3ea6ff; color: black; border-radius: 4px; padding: 6px 16px;">Izoh
                                        qoldirish</button>
                                </div>
                            </div>
                        </div>
                        <div id="commentsList" style="margin-top: 24px;">
                            <!-- Comments injected via app.js -->
                        </div>
                    </div>

                    <hr>

                    <!-- Rating Section -->
                    <div class="rating-section" style="margin-top: 20px;">
                        <h4>Reyting: <span id="currentRating">0</span></h4>
                        <div id="interactiveStars"
                            style="font-size: 24px; color: gold; cursor: pointer; display: flex; gap: 5px; margin-top: 10px;">
                            <i class="far fa-star" data-value="1"></i>
                            <i class="far fa-star" data-value="2"></i>
                            <i class="far fa-star" data-value="3"></i>
                            <i class="far fa-star" data-value="4"></i>
                            <i class="far fa-star" data-value="5"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Sidebar (Related Videos) -->
            <div class="modal-sidebar" id="modalSidebar">
                <h3>Tavsiya etilganlar</h3>
                <div id="relatedVideosList">
                    <!-- Related videos injected via app.js -->
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Modal (Videos) -->
    <div id="uploadModal" class="modal">
        <div class="modal-overlay" onclick="closeAllModals()"></div>
        <div class="modal-content upload-content">
            <button class="close-modal" onclick="closeAllModals()">&times;</button>
            <h2 id="uploadModalTitle" style="margin-bottom: 24px;">E'lon berish</h2>
            <form id="uploadForm">
                <input type="hidden" id="editVideoId">
                <div class="form-group">
                    <label for="uploadTitle">Sarlavha</label>
                    <input type="text" id="uploadTitle" placeholder="Masalan: Bo'ribosar iti sotiladi" required>
                </div>
                <div class="form-group">
                    <label for="uploadYouTubeUrl">YouTube Video URL</label>
                    <input type="url" id="uploadYouTubeUrl" placeholder="https://www.youtube.com/watch?v=..." required>
                </div>
                <div class="form-group">
                    <label for="uploadCategory">Kategoriya</label>
                    <select id="uploadCategory">
                        <option value="it">Itlar</option>
                        <option value="mushuk">Mushuklar</option>
                        <option value="ot">Otlar</option>
                        <option value="qush">Qushlar</option>
                        <option value="mol">Sigirlar/Mollar</option>
                        <option value="yem">Yem-xashak</option>
                        <option value="asbob">Asbob-uskunalar</option>
                        <option value="ekzotik">Ekzotik</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="uploadPrice">Narxi (so'm)</label>
                    <input type="number" id="uploadPrice" placeholder="Masalan: 500000" required>
                </div>
                <div class="form-group">
                    <label for="uploadLocation">Hudud</label>
                    <select id="uploadLocation">
                        <option value="toshkent">Toshkent</option>
                        <option value="samarqand">Samarqand</option>
                        <option value="fargona">Farg'ona</option>
                        <option value="andijon">Andijon</option>
                        <option value="namangan">Namangan</option>
                        <option value="buhoro">Buxoro</option>
                        <option value="navoiy">Navoiy</option>
                        <option value="qashqadaryo">Qashqadaryo</option>
                        <option value="surxandaryo">Surxondaryo</option>
                        <option value="jizzax">Jizzax</option>
                        <option value="sirdaryo">Sirdaryo</option>
                        <option value="xorazm">Xorazm</option>
                        <option value="qoraqalpogiston">Qoraqalpog'iston</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="uploadPhone">Telefon raqamingiz</label>
                    <input type="tel" id="uploadPhone" placeholder="+998 90 123 45 67" required>
                </div>
                <div class="form-group">
                    <label for="uploadDuration">Davomiyligi (masalan: 1:20)</label>
                    <input type="text" id="uploadDuration" placeholder="1:20">
                </div>
                <div class="form-group">
                    <label for="uploadDesc">Tavsif</label>
                    <textarea id="uploadDesc" rows="3" placeholder="Hayvon haqida batafsil..."></textarea>
                </div>
                <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                    <input type="checkbox" id="uploadIsShort" style="width: auto;">
                    <label for="uploadIsShort" style="margin: 0; cursor: pointer;">Shorts (vertikal video)</label>
                </div>
                <button type="submit" id="uploadSubmitBtn" class="submit-btn"
                    style="background: #3ea6ff; color: black;">E'lonni joylashtirish</button>
            </form>
        </div>
    </div>

    <!-- Vet Post Modal -->
    <div id="vetPostModal" class="modal">
        <div class="modal-overlay" onclick="closeAllModals()"></div>
        <div class="modal-content upload-content">
            <button class="close-modal" onclick="closeAllModals()">&times;</button>
            <h2 style="margin-bottom: 24px;">Veterinar bo'lib ro'yxatdan o'tish</h2>
            <form id="vetPostForm">
                <div class="form-group">
                    <label for="vetName">Ism-sharif</label>
                    <input type="text" id="vetName" placeholder="Dr. Falonchi Pismadonchi" required>
                </div>
                <div class="form-group">
                    <label for="vetSpecialty">Mutaxassislik</label>
                    <input type="text" id="vetSpecialty" placeholder="Masalan: Jarroh, Terapevt" required>
                </div>
                <div class="form-group">
                    <label for="vetClinic">Klinika / Markaz nomi</label>
                    <input type="text" id="vetClinic" placeholder="Masalan: VetCare Clinic">
                </div>
                <div class="form-group">
                    <label for="vetExperience">Tajriba (yil)</label>
                    <input type="number" id="vetExperience" placeholder="Masalan: 5" required>
                </div>
                <div class="form-group">
                    <label for="vetLocation">Hudud</label>
                    <select id="vetLocation" required>
                        <option value="toshkent">Toshkent</option>
                        <option value="samarqand">Samarqand</option>
                        <option value="fargona">Farg'ona</option>
                        <option value="andijon">Andijon</option>
                        <option value="namangan">Namangan</option>
                        <option value="buhoro">Buxoro</option>
                        <option value="navoiy">Navoiy</option>
                        <option value="qashqadaryo">Qashqadaryo</option>
                        <option value="surxandaryo">Surxondaryo</option>
                        <option value="jizzax">Jizzax</option>
                        <option value="sirdaryo">Sirdaryo</option>
                        <option value="xorazm">Xorazm</option>
                        <option value="qoraqalpogiston">Qoraqalpog'iston</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="vetPhone">Telefon</label>
                    <input type="tel" id="vetPhone" placeholder="+998 90 123 45 67" required>
                </div>
                <div class="form-group">
                    <label for="vetTelegram">Telegram foydalanuvchi nomi (@siz)</label>
                    <input type="text" id="vetTelegram" placeholder="username" required>
                </div>
                <div class="form-group">
                    <label for="vetWorkTime">Ish vaqti</label>
                    <input type="text" id="vetWorkTime" placeholder="Masalan: Du-Sha 09:00-19:00">
                </div>
                <div class="form-group">
                    <label for="vetServices">Xizmatlar (vergul bilan ajrating)</label>
                    <input type="text" id="vetServices" placeholder="Vaksinatsiya, Jarrohlik, UZI">
                </div>
                <div class="form-group">
                    <label for="vetBio">Qo'shimcha ma'lumot</label>
                    <textarea id="vetBio" rows="2" placeholder="Ixtisos, xizmat narxlari, tajriba..."></textarea>
                </div>
                <div class="form-group" style="display:flex; gap:18px; align-items:center; flex-wrap:wrap;">
                    <label style="display:flex; align-items:center; gap:8px; margin:0;">
                        <input type="checkbox" id="vetEmergency" style="width:auto;"> 24/7 shoshilinch xizmat
                    </label>
                    <label style="display:flex; align-items:center; gap:8px; margin:0;">
                        <input type="checkbox" id="vetHomeVisit" style="width:auto;"> Uyga chiqib ko'rik
                    </label>
                </div>
                <div class="form-group">
                    <label for="vetImage">Profil rasmi URL</label>
                    <input type="url" id="vetImage" placeholder="https://example.com/photo.jpg">
                </div>
                <div class="form-group">
                    <label for="vetDiplomaNumber">Diplom / Litsenziya raqami</label>
                    <input type="text" id="vetDiplomaNumber" placeholder="Masalan: VET-2026-00123">
                </div>
                <div class="form-group">
                    <label for="vetDiplomaUrl">Diplom URL (Google Drive va h.k.)</label>
                    <input type="url" id="vetDiplomaUrl" placeholder="https://...">
                </div>
                <div class="form-group">
                    <label for="vetDiplomaFile">Yoki diplom faylini yuklang (PDF/JPG/PNG, max 2MB)</label>
                    <input type="file" id="vetDiplomaFile" accept=".pdf,image/*">
                </div>
                <p style="color:var(--text-secondary); font-size:12px; margin-top:-8px;">
                    Eslatma: Diplom URL yoki fayldan kamida bittasini kiriting.
                </p>
                <button type="submit" class="submit-btn" style="background: #3ea6ff; color: black;">Ro'yxatdan
                    o'tish</button>
            </form>
        </div>
    </div>

    <!-- Store Post Modal -->
    <div id="storePostModal" class="modal">
        <div class="modal-overlay" onclick="closeAllModals()"></div>
        <div class="modal-content upload-content">
            <button class="close-modal" onclick="closeAllModals()">&times;</button>
            <h2 style="margin-bottom: 24px;">Mahsulot qo'shish</h2>
            <form id="storePostForm">
                <div class="form-group">
                    <label for="storeProductName">Mahsulot nomi</label>
                    <input type="text" id="storeProductName" placeholder="Masalan: Vitamin Kompleks" required>
                </div>
                <div class="form-group">
                    <label for="storeCategory">Kategoriya</label>
                    <input type="text" id="storeCategory" placeholder="Masalan: Vitamin, Antibiotik" required>
                </div>
                <div class="form-group">
                    <label for="storePrice">Narxi (so'm)</label>
                    <input type="number" id="storePrice" placeholder="Masalan: 50000" required>
                </div>
                <div class="form-group">
                    <label for="storeUnit">Birlik (masalan: 100ml, 1 kg)</label>
                    <input type="text" id="storeUnit" placeholder="100ml" required>
                </div>
                <div class="form-group">
                    <label for="storeStock">Zaxira (dona)</label>
                    <input type="number" id="storeStock" placeholder="Masalan: 50" required>
                </div>
                <div class="form-group">
                    <label for="storeDesc">Tavsif</label>
                    <textarea id="storeDesc" rows="3" placeholder="Mahsulot haqida ma'lumot..."></textarea>
                </div>
                <div class="form-group">
                    <label for="storeImage">Rasm URL</label>
                    <input type="url" id="storeImage" placeholder="https://example.com/product.jpg">
                </div>
                <button type="submit" class="submit-btn" style="background: #4CAF50; color: white;">Qo'shish</button>
            </form>
        </div>
    </div>

    <!-- Dispatch Post Modal -->
    <div id="dispatchPostModal" class="modal">
        <div class="modal-overlay" onclick="closeAllModals()"></div>
        <div class="modal-content upload-content">
            <button class="close-modal" onclick="closeAllModals()">&times;</button>
            <h2 style="margin-bottom: 24px;">Transport e'loni berish</h2>
            <form id="dispatchPostForm">
                <div class="form-group">
                    <label for="dispatchType">E'lon turi</label>
                    <select id="dispatchType">
                        <option value="offer">Mashinam bor (Yuk tashuvchi)</option>
                        <option value="need">Mashina kerak (Yuk egasi)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="dispatchVehicle">Mashina turi</label>
                    <input type="text" id="dispatchVehicle" placeholder="Masalan: Kamaz, GAZel, Isuzu" required>
                </div>
                <div class="form-group">
                    <label for="dispatchFrom">Qaerdan</label>
                    <input type="text" id="dispatchFrom" placeholder="Shahar yoki viloyat" required>
                </div>
                <div class="form-group">
                    <label for="dispatchTo">Qaerga</label>
                    <input type="text" id="dispatchTo" placeholder="Shahar yoki viloyat" required>
                </div>
                <div class="form-group">
                    <label for="dispatchCapacity">Sig'imi / Yuk vazni</label>
                    <input type="text" id="dispatchCapacity" placeholder="Masalan: 10 tonna" required>
                </div>
                <div class="form-group">
                    <label for="dispatchPrice">Narxi (so'm)</label>
                    <input type="text" id="dispatchPrice" placeholder="Masalan: 500 000 yoki Kelishiladi" required>
                </div>
                <div class="form-group">
                    <label for="dispatchPhone">Telefon</label>
                    <input type="tel" id="dispatchPhone" placeholder="+998 90 123 45 67" required>
                </div>
                <div class="form-group">
                    <label for="dispatchTelegram">Telegram (@siz)</label>
                    <input type="text" id="dispatchTelegram" placeholder="username" required>
                </div>
                <div class="form-group">
                    <label for="dispatchDesc">Tavsif</label>
                    <textarea id="dispatchDesc" rows="2" placeholder="Qo'shimcha ma'lumotlar..."></textarea>
                </div>
                <button type="submit" class="submit-btn" style="background: #3ea6ff; color: black;">E'lonni
                    joylashtirish</button>
            </form>
        </div>
    </div>

    <!-- Academy Post Modal -->
    <div id="academyPostModal" class="modal">
        <div class="modal-overlay" onclick="closeAllModals()"></div>
        <div class="modal-content upload-content">
            <button class="close-modal" onclick="closeAllModals()">&times;</button>
            <h2 style="margin-bottom: 24px;">Yangi kurs qo'shish</h2>
            <form id="academyPostForm">
                <div class="form-group">
                    <label for="academyTitle">Kurs sarlavhasi</label>
                    <input type="text" id="academyTitle" placeholder="Masalan: Chorva parvarishi asosi" required>
                </div>
                <div class="form-group">
                    <label for="academyYTUrl">YouTube Playlist/Video URL</label>
                    <input type="url" id="academyYTUrl" placeholder="https://www.youtube.com/..." required>
                </div>
                <div class="form-group">
                    <label for="academyLessons">Darslar soni</label>
                    <input type="number" id="academyLessons" placeholder="Masalan: 12" required>
                </div>
                <div class="form-group">
                    <label for="academyDuration">Umumiy vaqti</label>
                    <input type="text" id="academyDuration" placeholder="Masalan: 4 soat" required>
                </div>
                <div class="form-group">
                    <label for="academyDesc">Kurs haqida qisqacha</label>
                    <textarea id="academyDesc" rows="3" placeholder="Kurs mazmuni haqida..."></textarea>
                </div>
                <button type="submit" class="submit-btn" style="background: #FF9800; color: white;">Kursni
                    yaratish</button>
            </form>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-overlay" onclick="closeAllModals()"></div>
        <div class="modal-content upload-content" style="max-width: 400px;">
            <button class="close-modal" onclick="closeAllModals()">&times;</button>

            <div class="auth-tabs" style="display: flex; gap: 20px; margin-bottom: 24px;">
                <button class="auth-tab active" data-type="login"
                    style="background: none; border: none; color: white; border-bottom: 2px solid #3ea6ff; padding-bottom: 8px; cursor: pointer; font-weight: 600;">Kirish</button>
                <button class="auth-tab" data-type="signup"
                    style="background: none; border: none; color: var(--text-secondary); padding-bottom: 8px; cursor: pointer;">Ro'yxatdan
                    o'tish</button>
            </div>

            <!-- Login Form -->
            <form id="loginForm" class="auth-form active" style="display: block;">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="example@mail.com">
                </div>
                <div class="form-group">
                    <label>Parol</label>
                    <input type="password" id="loginPass" placeholder="******">
                </div>
                <button type="submit" class="submit-btn"
                    style="background: #3ea6ff; color: black; margin-bottom: 12px;">Kirish</button>
                <button type="button" id="demoLoginBtn" onclick="handleDemoLogin()" class="submit-btn"
                    style="background: #444; color: white;">Demo rejimi</button>
            </form>

            <!-- Signup Form -->
            <form id="signupForm" class="auth-form" style="display: none;">
                <div class="form-group">
                    <label>Ism-sharif</label>
                    <input type="text" id="signupName" placeholder="Ismingiz">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="signupEmail" placeholder="example@mail.com">
                </div>
                <div class="form-group">
                    <label>Parol</label>
                    <input type="password" id="signupPass" placeholder="******">
                </div>
                <button type="submit" class="submit-btn" style="background: #3ea6ff; color: black;">Ro'yxatdan
                    o'tish</button>
                <button type="button" id="demoSignupBtn" onclick="handleDemoSignup()" class="submit-btn"
                    style="background: #444; color: white; margin-top: 10px;">Demo ro'yxatdan o'tish</button>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Application Script -->
    <script src="app.js"></script>

    <!-- UI Helper logic -->
    <script>
        function openUploadModal() {
            if (!state.currentUser) {
                state.pendingAction = 'upload';
                openAuthModal('signup');
                showToast("E'lon berish uchun ro'yxatdan o'ting", "info");
            } else {
                if (state.currentNav === 'vets') {
                    document.getElementById('vetPostModal').classList.add('active');
                } else if (state.currentNav === 'pharmacies') {
                    document.getElementById('storePostModal').classList.add('active');
                } else if (state.currentNav === 'dispatch') {
                    document.getElementById('dispatchPostModal').classList.add('active');
                } else if (state.currentNav === 'academy') {
                    document.getElementById('academyPostModal').classList.add('active');
                } else {
                    document.getElementById('uploadModal').classList.add('active');
                    const categorySelect = document.getElementById('uploadCategory');
                    if (categorySelect && state.currentNav === 'tools') categorySelect.value = 'asbob';
                    if (categorySelect && state.currentNav === 'feed') categorySelect.value = 'yem';
                }
            }
        }

        function switchAdminTab(tab) {
            document.querySelectorAll('.admin-content-tabs button').forEach((b, i) => {
                b.classList.toggle('active', (tab === 'videos' && i === 0) || (tab === 'users' && i === 1));
            });
            document.getElementById('adminVideosTable').style.display = tab === 'videos' ? 'table' : 'none';
            document.getElementById('adminUsersTable').style.display = tab === 'users' ? 'table' : 'none';
        }

        function logout() {
            state.currentUser = null;
            localStorage.removeItem('zootube_user');
            updateAuthStateUI();
            state.currentNav = 'home';
            renderVideos();
            showToast("Tizimdan chiqildi", "info");
        }
    </script>
</body>

</html>
